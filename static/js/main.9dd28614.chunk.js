(this["webpackJsonpphoto-gallery-app"]=this["webpackJsonpphoto-gallery-app"]||[]).push([[0],{141:function(t,e,n){},145:function(t,e,n){},146:function(t,e,n){},271:function(t,e,n){},272:function(t,e,n){},291:function(t,e,n){},292:function(t,e,n){},293:function(t,e,n){"use strict";n.r(e);var a=n(1),o=n(0),c=n.n(o),r=n(35),i=n.n(r),s=n(6),l=n(20),u={name:"Home",href:"/Photo_gallery/"},h={name:"My Favorites",href:"/Photo_gallery/favorites"},j=(n(141),function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("nav",{className:"header__nav",children:Object(a.jsxs)("ul",{className:"header__nav-list",children:[Object(a.jsx)("li",{className:"header__nav-list-item",children:Object(a.jsxs)(l.b,{activeClassName:"is-active",exact:!0,to:u.href,children:[u.name,Object(a.jsx)("div",{className:"header__nav-list-item-hover-line"})]})}),Object(a.jsx)("li",{className:"header__nav-list-item",children:Object(a.jsxs)(l.b,{activeClassName:"is-active",to:h.href,children:[h.name,Object(a.jsx)("div",{className:"header__nav-list-item-hover-line"})]})})]})})})})})}),d=n(3),p=n(129),f=(n(145),function(t){var e=t.data,n=t.photoURL,o=t.author,c=t.openModal,r=t.inFavorite,i=t.handlerFavorite;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("li",{className:"photo-item",children:Object(a.jsxs)("div",{className:"photo-item-container",children:[Object(a.jsx)("div",{className:"photo-item-image",onClick:function(){c(n,o)},children:Object(a.jsx)("img",{src:n,alt:o})}),Object(a.jsxs)("div",{className:"photo-item-descr",children:[Object(a.jsx)("h3",{className:"photo-item-author",children:o}),Object(a.jsx)("button",{className:"photo-item-btn-favorite",onClick:function(){i(e)},children:Object(a.jsx)("i",{className:r?"fas fa-star":"far fa-star"})})]})]})})})}),O=(n(146),n(122)),m=n.n(O),b=(n(271),function(t){var e=t.onClose,n=t.isOpenModal,c=Object(o.useRef)(null);Object(o.useEffect)((function(){return document.addEventListener("click",r,!1),function(){document.addEventListener("click",r,!1)}}));var r=function(t){m()(c.current)||c.current.contains(t.target)||e()};return Object(a.jsx)("div",{className:"photo-modal",children:Object(a.jsx)("div",{className:"photo-modal__container",ref:c,children:Object(a.jsx)("div",{className:"photo-modal__image",children:Object(a.jsx)("img",{src:n.imageURL,alt:n.imageAuthor})})})})}),v=n(123),g=n(124),x=function(){function t(){Object(v.a)(this,t)}return Object(g.a)(t,null,[{key:"getFromLocalStorage",value:function(t){var e=localStorage.getItem(t);return JSON.parse(e)}},{key:"setData",value:function(t,e){var n=JSON.stringify(e);localStorage.setItem(t,n)}},{key:"postToLocalStorage",value:function(e,n){var a=t.getFromLocalStorage(e);null===a&&(a=[]),a.push(n),this.setData(e,a)}},{key:"deleteFromLocalStorage",value:function(e,n){var a=t.getFromLocalStorage(e).filter((function(t){return t.id!==n}));this.setData(e,a)}}]),t}(),_="ADD_PHOTO_LIST",y="ADD_FAVORITE_LIST",L="ADD_FAVORITE_PHOTO",N="REMOVE_FAVORITE_PHOTO",F="SET_PHOTO_PAGE",P="SET_PHOTO_AMOUNT";n(272);var S=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("p",{className:"empty-filed",children:"List is empty. Please add some picture to your favorites."})})},R=function(t){var e=t.photoList,n=t.homePage,c=Object(s.b)(),r=Object(s.c)((function(t){return t.favoritePhotoReducer.favoriteList})),i=Object(o.useState)({isOpen:!1,imageURL:"",imageAuthor:""}),l=Object(p.a)(i,2),u=l[0],h=l[1],j=function(t){return!!r.find((function(e){return e.id===t.id}))},d=function(t){var e;j(t)?(x.deleteFromLocalStorage("favorite",t.id),c((e=t.id,function(t){t({type:N,payload:e})}))):(x.postToLocalStorage("favorite",t),c(function(t){return function(e){e({type:L,payload:t})}}(t)))},O=function(t,e){h({isOpen:!0,imageURL:t,imageAuthor:e})};return e.length>0?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("ul",{className:"photo-list",children:[e.map((function(t){return Object(a.jsx)(f,{data:t,photoURL:t.download_url,author:t.author,inFavorite:j(t),handlerFavorite:d,openModal:O},t.id)})),u.isOpen&&Object(a.jsx)(b,{onClose:function(){h({isOpen:!1,imageURL:"",imageAuthor:""})},isOpenModal:u})]})}):Object(a.jsx)(a.Fragment,{children:!n&&Object(a.jsx)(S,{})})},A=n(69),E=n.n(A),T=n(125),C=n(126),D=n.n(C),k=function(t,e){try{return D.a.get("".concat("https://picsum.photos/v2/list","?page=").concat(t,"&limit=").concat(e)).then((function(t){return t}))}catch(n){return n.response}};function w(t){return function(e){e({type:F,payload:t})}}function I(t){return function(e){e({type:P,payload:t})}}n(291);var M=function(t){var e=t.onChangePage,n=t.photoPage,o=t.photoAmount,c=t.onChangeAmount;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"pagination",children:[Object(a.jsxs)("div",{className:"pagination__page",children:[Object(a.jsx)("button",{className:"pagination__btn--prev pagination__btn",onClick:function(){e("prev")},disabled:1===n,children:"prev"}),Object(a.jsx)("div",{className:"pagination__page-title",children:n}),Object(a.jsx)("button",{className:"pagination__btn--next pagination__btn",onClick:function(){e("next")},children:"next"})]}),Object(a.jsxs)("form",{className:"pagination__form",children:[Object(a.jsx)("label",{className:"pagination__photo-amount-title",htmlFor:"photo-amount",children:"Photo amount"}),Object(a.jsxs)("select",{className:"pagination__photo-amount",name:"photo-amount",value:o,onChange:function(t){c(t.target.value)},children:[Object(a.jsx)("option",{value:10,children:"10"}),Object(a.jsx)("option",{value:20,children:"20"}),Object(a.jsx)("option",{value:30,children:"30"})]})]})]})})},U=function(){var t=Object(s.c)((function(t){return t.photoGalleryReducer.photoList})),e=Object(s.c)((function(t){return t.photoPageReducer.photoPage})),n=Object(s.c)((function(t){return t.photoAmountReducer.photoAmount})),c=Object(s.b)();Object(o.useEffect)((function(){e&&n&&c(function(t,e){return function(){var n=Object(T.a)(E.a.mark((function n(a){var o;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,k(t,e).then((function(t){return console.log("Result --\x3e",t.data),t.data}));case 2:o=n.sent,a({type:_,payload:o});case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}(e,n))}),[c,e,n]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(M,{onChangePage:function(t){"prev"===t&&e>1?(c(w(e-1)),x.setData("page",e-1)):"next"===t&&(c(w(e+1)),x.setData("page",e+1))},photoPage:e,photoAmount:n,onChangeAmount:function(t){c(I(t)),x.setData("amount",t)}}),Object(a.jsx)(R,{photoList:t,homePage:!0})]})})},H=function(){var t=Object(s.c)((function(t){return t.favoritePhotoReducer.favoriteList}));return console.log("FAVORITES ---\x3e",t),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"container",children:Object(a.jsx)(R,{photoList:t})})})},V=function(){return Object(a.jsxs)(d.c,{children:[Object(a.jsx)(d.a,{exact:!0,path:u.href,component:U}),Object(a.jsx)(d.a,{exact:!0,path:h.href,component:H})]})},J=function(){var t=Object(s.b)();return Object(o.useEffect)((function(){var e,n=x.getFromLocalStorage("favorite");n&&t((e=n,function(t){t({type:y,payload:e})}));var a=x.getFromLocalStorage("page");a?t(w(a)):(x.setData("page",1),t(w(1)));var o=x.getFromLocalStorage("amount");o?t(I(o)):(x.setData("amount","10"),t(I("10")))})),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j,{}),Object(a.jsx)(V,{})]})},G=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,294)).then((function(e){var n=e.getCLS,a=e.getFID,o=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),a(t),o(t),c(t),r(t)}))},B=n(15),X=n(127),q=n(13),z={photoList:[]},K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case _:return Object(q.a)(Object(q.a)({},t),{photoList:e.payload});default:return t}},Q=n(128),W={favoriteList:[]},Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y:return Object(q.a)(Object(q.a)({},t),{favoriteList:e.payload});case L:return Object(q.a)(Object(q.a)({},t),{},{favoriteList:[].concat(Object(Q.a)(t.favoriteList),[e.payload])});case N:var n=t.favoriteList.filter((function(t){return t.id!==e.payload}));return Object(q.a)({},{favoriteList:n});default:return t}},Z={photoPage:null},$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case F:return{photoPage:e.payload};default:return t}},tt={photoAmount:""},et=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case P:return{photoAmount:e.payload};default:return t}},nt=Object(B.c)({photoGalleryReducer:K,favoritePhotoReducer:Y,photoPageReducer:$,photoAmountReducer:et});var at=function(t){var e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||B.d;return Object(B.e)(nt,t,e(Object(B.a)(X.a)))},ot=(n(292),document.getElementById("root")),ct=at();i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(s.a,{store:ct,children:Object(a.jsx)(l.a,{children:Object(a.jsx)(J,{})})})}),ot),G()}},[[293,1,2]]]);
//# sourceMappingURL=main.9dd28614.chunk.js.map