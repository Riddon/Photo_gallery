(this["webpackJsonpphoto-gallery-app"]=this["webpackJsonpphoto-gallery-app"]||[]).push([[0],{141:function(t,e,n){},145:function(t,e,n){},146:function(t,e,n){},271:function(t,e,n){},290:function(t,e,n){},291:function(t,e,n){},292:function(t,e,n){},293:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n(0),o=n.n(c),r=n(38),i=n.n(r),s=n(10),u=n(21),l={name:"Home",href:"/Riddon/Photo_gallery/"},j={name:"My Favorites",href:"/Riddon/Photo_gallery/favorites"},h=(n(141),function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("nav",{className:"header__nav",children:Object(a.jsxs)("ul",{className:"header__nav-list",children:[Object(a.jsx)("li",{className:"header__nav-list-item",children:Object(a.jsxs)(u.b,{to:l.href,children:[l.name,Object(a.jsx)("div",{className:"header__nav-list-item-hover-line"})]})}),Object(a.jsx)("li",{className:"header__nav-list-item",children:Object(a.jsxs)(u.b,{to:j.href,children:[j.name,Object(a.jsx)("div",{className:"header__nav-list-item-hover-line"})]})})]})})})})})}),d=n(3),f=n(28),p=(n(145),function(t){var e=t.data,n=t.photoURL,c=t.author,o=t.openModal,r=t.inFavorite,i=t.handlerFavorite;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("li",{className:"photo-item",children:Object(a.jsxs)("div",{className:"photo-item-container",children:[Object(a.jsx)("div",{className:"photo-item-image",onClick:function(){o(n,c)},children:Object(a.jsx)("img",{src:n,alt:c})}),Object(a.jsxs)("div",{className:"photo-item-descr",children:[Object(a.jsx)("h3",{className:"photo-item-author",children:c}),Object(a.jsx)("button",{className:"photo-item-btn-favorite",onClick:function(){i(e)},children:Object(a.jsx)("i",{className:r?"fas fa-star":"far fa-star"})})]})]})})})}),O=(n(146),n(125)),b=n.n(O),m=(n(271),function(t){var e=t.onClose,n=t.isOpenModal,o=Object(c.useRef)(null);Object(c.useEffect)((function(){return document.addEventListener("click",r,!1),function(){document.addEventListener("click",r,!1)}}));var r=function(t){b()(o.current)||o.current.contains(t.target)||e()};return Object(a.jsx)("div",{className:"photo-modal",children:Object(a.jsx)("div",{className:"photo-modal__container",ref:o,children:Object(a.jsx)("div",{className:"photo-modal__image",children:Object(a.jsx)("img",{src:n.imageURL,alt:n.imageAuthor})})})})}),v=n(126),g=n(127),x=function(){function t(){Object(v.a)(this,t)}return Object(g.a)(t,null,[{key:"getFromLocalStorage",value:function(t){var e=localStorage.getItem(t);return JSON.parse(e)}},{key:"setData",value:function(t,e){var n=JSON.stringify(e);localStorage.setItem(t,n)}},{key:"postToLocalStorage",value:function(e,n){var a=t.getFromLocalStorage(e);null===a&&(a=[]),a.push(n),this.setData(e,a)}},{key:"deleteFromLocalStorage",value:function(e,n){var a=t.getFromLocalStorage(e).filter((function(t){return t.id!==n}));this.setData(e,a)}}]),t}(),_=n(13),L=n.n(_),y=n(22),N="ADD_PHOTO_LIST",F="ADD_FAVORITE_PHOTO",S="REMOVE_FAVORITE_PHOTO",R=n(72),E=n.n(R),P=function(t,e){try{return E.a.get("".concat("https://picsum.photos/v2/list","?page=").concat(t,"&limit=").concat(e)).then((function(t){return t}))}catch(n){return n.response}},k=function(){var t=Object(y.a)(L.a.mark((function t(e){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.get("".concat("https://picsum.photos/id","/").concat(e,"/info")).then((function(t){return t}));case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",t.t0.response);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();n(290);var C=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("p",{className:"empty-filed",children:"List is empty. Please add some picture to your favorites."})})},w=function(t){var e=t.photoList,n=Object(s.b)(),o=Object(s.c)((function(t){return t.favoritePhotoReducer.favoriteList})),r=Object(c.useState)({isOpen:!1,imageURL:"",imageAuthor:""}),i=Object(f.a)(r,2),u=i[0],l=i[1],j=function(t){return!!o.find((function(e){return e.id===t.id}))},h=function(t){var e;j(t)?(x.deleteFromLocalStorage("favorite",t.id),n((e=t.id,function(t){t({type:S,payload:e})}))):(x.postToLocalStorage("favorite",t),n(function(t){return function(e){e({type:F,payload:t})}}(t)))},d=function(t,e){l({isOpen:!0,imageURL:t,imageAuthor:e})};return e.length>0?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("ul",{className:"photo-list",children:[e.map((function(t){return Object(a.jsx)(p,{data:t,photoURL:t.download_url,author:t.author,inFavorite:j(t),handlerFavorite:h,openModal:d},t.id)})),u.isOpen&&Object(a.jsx)(m,{onClose:function(){l({isOpen:!1,imageURL:"",imageAuthor:""})},isOpenModal:u})]})}):Object(a.jsx)(C,{})};n(291);var A=function(t){var e=t.onChangePage,n=t.photoPage,c=t.photoAmount,o=t.onChangeAmount;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"pagination",children:[Object(a.jsxs)("div",{className:"pagination__btn-block",children:[Object(a.jsx)("button",{className:"pagination__btn--prev pagination__btn",onClick:function(){e("prev")},disabled:1===n,children:"prev"}),Object(a.jsx)("button",{className:"pagination__btn--next pagination__btn",onClick:function(){e("next")},children:"next"})]}),Object(a.jsxs)("form",{className:"pagination__form",children:[Object(a.jsx)("label",{className:"pagination__photo-amount-title",htmlFor:"photo-amount",children:"Photo amount"}),Object(a.jsxs)("select",{className:"pagination__photo-amount",name:"photo-amount",value:c,onChange:function(t){o(t.target.value)},children:[Object(a.jsx)("option",{value:10,children:"10"}),Object(a.jsx)("option",{value:20,children:"20"}),Object(a.jsx)("option",{value:30,children:"30"})]})]})]})})},T=function(){var t=Object(s.c)((function(t){return t.photoGalleryReducer.photoList})),e=Object(s.b)(),n=Object(c.useState)(1),o=Object(f.a)(n,2),r=o[0],i=o[1],u=Object(c.useState)(10),l=Object(f.a)(u,2),j=l[0],h=l[1];Object(c.useEffect)((function(){e(function(t,e){return function(){var n=Object(y.a)(L.a.mark((function n(a){var c;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P(t,e).then((function(t){return console.log("Result --\x3e",t.data),t.data}));case 2:c=n.sent,a({type:N,payload:c});case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}(r,j))}),[e,r,j]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(A,{onChangePage:function(t){"prev"===t&&r>1?i(r-1):"next"===t&&i(r+1)},photoPage:r,photoAmount:j,onChangeAmount:function(t){h(t)}}),Object(a.jsx)(w,{photoList:t})]})})},D=function(){var t=Object(s.c)((function(t){return t.favoritePhotoReducer.favoriteList}));return console.log("FAVORITES ---\x3e",t),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"container",children:Object(a.jsx)(w,{photoList:t})})})},I=function(){return Object(a.jsxs)(d.c,{children:[Object(a.jsx)(d.a,{exact:!0,path:l.href,component:T}),Object(a.jsx)(d.a,{exact:!0,path:j.href,component:D})]})},M=function(){var t=Object(s.b)();return Object(c.useEffect)((function(){var e=x.getFromLocalStorage("favorite");e&&e.forEach((function(e){var n;t((n=e.id,function(){var t=Object(y.a)(L.a.mark((function t(e){var a;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(n).then((function(t){return t.data}));case 2:a=t.sent,e({type:F,payload:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}))})),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(h,{}),Object(a.jsx)(I,{})]})},U=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,294)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,o=e.getLCP,r=e.getTTFB;n(t),a(t),c(t),o(t),r(t)}))},V=n(15),H=n(128),J=n(18),B={photoList:[]},G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case N:return Object(J.a)(Object(J.a)({},t),{photoList:e.payload});default:return t}},X=n(129),q={favoriteList:[]},z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case F:return Object(J.a)(Object(J.a)({},t),{},{favoriteList:[].concat(Object(X.a)(t.favoriteList),[e.payload])});case S:var n=t.favoriteList.filter((function(t){return t.id!==e.payload}));return Object(J.a)({},{favoriteList:n});default:return t}},K=Object(V.c)({photoGalleryReducer:G,favoritePhotoReducer:z});var Q=function(t){var e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||V.d;return Object(V.e)(K,t,e(Object(V.a)(H.a)))},W=(n(292),document.getElementById("root")),Y=Q();i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(s.a,{store:Y,children:Object(a.jsx)(u.a,{children:Object(a.jsx)(M,{})})})}),W),U()}},[[293,1,2]]]);
//# sourceMappingURL=main.34585062.chunk.js.map